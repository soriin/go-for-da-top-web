<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../reduxMixin.html">
<link rel="import" href="../services/tournamentService.html">
<link rel="import" href="../vendor/lodash.html">
<link rel="import" href="../vendor/moment.html">

<dom-module id="gfdt-tournaments">
  <template>
    <style include="shared-styles">

    </style>
    <div class="tournaments-container">
      Tournaments!
      <div>
        <paper-button on-tap="setFilter" data-filter="mine">Only Mine</paper-button>
        <paper-button on-tap="setFilter" data-filter="all">All</paper-button>
      </div>

      <template is="dom-repeat" items="[[tournamentsToDisplay]]" as="tournament">
        <h1>[[tournament.title]]</h1>
        <span>[[tournament.startDate]] - [[tournament.endDate]]</span>
        <div hidden$="[[!tournament.isActive]]">
          <span>IN PROGRESS</span>
        </div>
        <div hidden$="[[!canJoin(tournament, user._id)]]">
            <paper-button on-tap="join" data-tournament-id$="[[tournament._id]]" raised>Join</paper-button>
        </div>
        <div hidden$="[[!canLeave(tournament, user._id)]]">
            <paper-button on-tap="leave" data-tournament-id$="[[tournament._id]]" raised>Leave</paper-button>
        </div>
        <div hidden$="[[!canActivate(tournament, user._id)]]">
            <paper-button on-tap="activate" data-tournament-id$="[[tournament._id]]" raised>Start!</paper-button>
        </div>
      </template>
    </div>
  </template>

  <script src="tournaments.js">
  </script>
</dom-module>