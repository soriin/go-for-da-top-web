<link rel="import" href="./fetchRequest.html">

<dom-module id="gfdt-tournament-service">
  <script>
    class TournamentService {
      getActive() {
        const req = createRequest('tournaments?active=true')
        return fetch(req)
      }

      getInactive() {
        const req = createRequest('tournaments?active=false')
        return fetch(req)
      }

      create(data) {
        let payload
        if (typeof(data) === 'object') {
          payload = JSON.stringify(data)
        } else {
          payload = data
        }
        const req = createRequest('tournaments', {method: 'POST', body: payload})
        return fetch (req)
      }

      join(tournamentId) {
        const req = createRequest(`tournaments/${tournamentId}/entrant`, {method: 'POST'})
        return fetch (req)
      }

      leave(tournamentId) {
        const req = createRequest(`tournaments/${tournamentId}/entrant`, {method: 'DELETE'})
        return fetch (req)
      }
    }
  </script>
</dom-module>